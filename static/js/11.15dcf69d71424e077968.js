webpackJsonp([11],{"2J6G":function(x,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),e.d(n,"modifyTime",function(){return o}),e.d(n,"s",function(){return E}),e.d(n,"topMsg",function(){return t});var o="2021-06-20 16:53:41",E='      <div class="mume markdown-preview  ">\n      <h1 class="mume-header" id="nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-nginxconf">nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6; nginx.conf</h1>\n\n<ul>\n<li>&#x9ED8;&#x8BA4;&#x76EE;&#x5F55;:\n<ul>\n<li>windows:<code>nginx/conf/nginx.conf</code></li>\n<li>linux:<code>nginx/nginx.conf</code></li>\n</ul>\n</li>\n<li>&#x4FEE;&#x6539;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x540E;&#x9700;&#x8981;&#x8FDB;&#x884C;<code>nginx -s reload</code>&#x64CD;&#x4F5C;</li>\n<li>&#x68C0;&#x67E5;&#x914D;&#x7F6E;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x65E0;&#x8BEF;:<code>nginx -t</code></li>\n<li>&#x987A;&#x5E8F;&#x4F9D;&#x65E7;&#x662F;&#x6309;&#x7167;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;&#x7684;&#x987A;&#x5E8F;&#x8BF4;&#x660E;</li>\n</ul>\n<pre data-role="codeBlock" data-info="conf" class="language-conf"><span class="code-mark">conf</span><code>#&#x6307;&#x660E;nginx&#x7684;&#x7528;&#x6237;&#x53CA;&#x7528;&#x6237;&#x7EC4;\n#windows&#x4E0B;&#x4E0D;&#x6307;&#x5B9A;\nuser  www www;\n\n#nginx&#x7684;worker&#x8FDB;&#x7A0B;&#x6570;&#x91CF;,&#x6839;&#x636E;&#x786C;&#x4EF6;&#x8FDB;&#x884C;&#x8C03;&#x6574;,&#x4E00;&#x822C;&#x4E3A;CPU&#x6570;&#x91CF;&#x6216;2&#x500D;&#x6570;&#x91CF;\nworker_processes  2;\n\n#&#x6307;&#x5B9A;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x6253;&#x5F00;&#x7684;&#x6700;&#x5927;&#x63CF;&#x8FF0;&#x7B26;,&#x503C;&#x5E94;&#x4E0E; /etc/security/limits.conf&#x4E00;&#x81F4;\nworker_rlimit_nofile 65535;\n\n#pid&#x6587;&#x4EF6;&#x5B58;&#x653E;&#x8DEF;&#x5F84;\npid /var/run/nginx.pid;\n\n#&#x8BBE;&#x5B9A;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;&#x7684;&#x6587;&#x4EF6;&#x4F4D;&#x7F6E;&#x53CA;&#x7EA7;&#x522B;,&#x53EF;&#x591A;&#x4E2A;\n#&#x7EA7;&#x522B;: debug &gt; info &gt; notice &gt; warn &gt; error &gt; crit \n#&#x7EA7;&#x522B;&#x8D8A;&#x9AD8;,&#x663E;&#x793A;&#x7684;&#x5185;&#x5BB9;&#x8D8A;&#x591A;\n#error_log  /var/log/nginx.error_log  info;\n\nevents {\n    #&#x5355;&#x4E2A;worker&#x8FDB;&#x7A0B;&#x7684;&#x6700;&#x5927;&#x8FDE;&#x63A5;&#x6570;\n    #nginx&#x7684;&#x603B;&#x8FDE;&#x63A5;&#x6570;=worker_processes * worker_connections\n    worker_connections   2000;\n\n    #&#x8BBE;&#x7F6E;&#x6A21;&#x578B;,&#x53EF;&#x9009;&#x9879;:kqueue, epoll, /dev/poll, select, poll\n    #FreeBSD&#x4F7F;&#x7528;kqueue, linux&#x4F7F;&#x7528;epoll\n    use kqueue;\n\n    #&#x8BBE;&#x7F6E;worker&#x7684;&#x5DE5;&#x4F5C;&#x65B9;&#x5F0F;&#x4E3A;&#x5E76;&#x884C;\n    multi_accept on;\n}\n\nhttp {\n    #&#x52A0;&#x8F7D;MIME type&#x6620;&#x5C04;\n    include       conf/mime.types;\n\n    #&#x9ED8;&#x8BA4;&#x7684;&#x6587;&#x4EF6;&#x7C7B;&#x578B;\n    default_type  application/octet-stream;\n\n    #&#x9690;&#x85CF;nginx&#x7248;&#x672C;&#x53F7;\n    server_tokens off;\n\n    # &#x8BBE;&#x5B9A;&#x65E5;&#x5FD7;&#x683C;&#x5F0F; &#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x591A;&#x79CD;&#x6837;&#x5F0F;,&#x5982;&#x4E0B;&#x7684;main|download\n    #1.$remote_addr &#x4E0E;$http_x_forwarded_for &#x7528;&#x4EE5;&#x8BB0;&#x5F55;&#x5BA2;&#x6237;&#x7AEF;&#x7684;ip&#x5730;&#x5740;\n    #2.$remote_user: &#x7528;&#x6765;&#x8BB0;&#x5F55;&#x5BA2;&#x6237;&#x7AEF;&#x7528;&#x6237;&#x540D;&#x79F0;\n    #3.$time_local: &#x7528;&#x6765;&#x8BB0;&#x5F55;&#x8BBF;&#x95EE;&#x65F6;&#x95F4;&#x4E0E;&#x65F6;&#x533A;\n    #4.$request: &#x7528;&#x6765;&#x8BB0;&#x5F55;&#x8BF7;&#x6C42;&#x7684;url&#x4E0E;http&#x534F;&#x8BAE;\n    #5.$status: &#x7528;&#x6765;&#x8BB0;&#x5F55;&#x8BF7;&#x6C42;&#x72B6;&#x6001;&#xFF1B;\n    #6.$body_bytes_sent: &#x8BB0;&#x5F55;&#x53D1;&#x9001;&#x7ED9;&#x5BA2;&#x6237;&#x7AEF;&#x6587;&#x4EF6;&#x4E3B;&#x4F53;&#x5185;&#x5BB9;&#x5927;&#x5C0F;\n    #7.$http_referer: &#x7528;&#x6765;&#x8BB0;&#x5F55;&#x4ECE;&#x90A3;&#x4E2A;&#x9875;&#x9762;&#x94FE;&#x63A5;&#x8BBF;&#x95EE;&#x8FC7;&#x6765;&#x7684;\n    log_format main      &apos;$remote_addr - $remote_user [$time_local] &apos;\n                         &apos;&quot;$request&quot; $status $bytes_sent &apos;\n                         &apos;&quot;$http_referer&quot; &quot;$http_user_agent&quot; &apos;\n                         &apos;&quot;$gzip_ratio&quot;&apos;;\n\n    log_format download  &apos;$remote_addr - $remote_user [$time_local] &apos;\n                         &apos;&quot;$request&quot; $status $bytes_sent &apos;\n                         &apos;&quot;$http_referer&quot; &quot;$http_user_agent&quot; &apos;\n                         &apos;&quot;$http_range&quot; &quot;$sent_http_content_range&quot;&apos;;\n    #&#x8BBE;&#x7F6E;&#x8FDE;&#x63A5;&#x65E5;&#x5FD7;\n    access_log /var/log/nginx.access.log main;\n    #&#x5173;&#x95ED;&#x8FDE;&#x63A5;&#x65E5;&#x5FD7;\n    #access_log off;\n    #&#x8BBE;&#x7F6E;&#x9519;&#x8BEF;&#x65E5;&#x5FD7;\n    error_log /var/log/nginx.error.log;\n\n    #&#x8BFB;&#x53D6;header&#x8D85;&#x65F6;&#x65F6;&#x95F4; 3minutes\n    client_header_timeout  3m;\n    #&#x8BFB;&#x53D6;body&#x8D85;&#x65F6;&#x65F6;&#x95F4; 3minutes\n    client_body_timeout    3m;\n    #&#x54CD;&#x5E94;&#x5BA2;&#x6237;&#x7AEF;&#x8D85;&#x65F6;&#x65F6;&#x95F4; 3minutes\n    send_timeout           3m;\n\n    #&#x5BA2;&#x6237;&#x7AEF;header&#x7684;buffer&#x5927;&#x5C0F;\n    client_header_buffer_size    1k;\n    #&#x5BA2;&#x6237;&#x7AEF;header&#x7684;buffer&#x7684;&#x6700;&#x5927;&#x6570;&#x91CF;&#x53CA;&#x5927;&#x5C0F;\n    large_client_header_buffers  4 4k;\n\n    #&#x542F;&#x7528;gzip&#x538B;&#x7F29;\n    gzip on;\n    #&#x6700;&#x5C0F;&#x538B;&#x7F29;&#x6587;&#x4EF6;&#x5927;&#x5C0F;\n    gzip_min_length  1100;\n    #&#x538B;&#x7F29;&#x7F13;&#x51B2;&#x533A;\n    gzip_buffers     4 8k;\n    #&#x538B;&#x7F29;&#x7C7B;&#x578B;\n    gzip_types       text/plain;\n\n    output_buffers   1 32k;\n    postpone_output  1460;\n\n    #&#x6307;&#x5B9A;nginx&#x662F;&#x5426;&#x4F7F;&#x7528;&#x96F6;&#x62F7;&#x8D1D;&#x6765;&#x8F93;&#x51FA;&#x6587;&#x4EF6;\n    #&#x4EC5;&#x5728;&#x9AD8;IO&#x65F6;&#x624D;&#x8BBE;&#x4E3A;off\n    sendfile         on;\n    #&#x7981;&#x7528;socket&#x7684;TCP_CORK,&#x4EC5;&#x5728;sendfile&#x65F6;&#x4F7F;&#x7528;\n    tcp_nopush       on;\n    tcp_nodelay      on;\n    send_lowat       12000;\n\n    #keep-alive&#x8D85;&#x65F6;&#x65F6;&#x95F4;,&#x53C2;&#x6570;&#x4E00;&#x4E3A;&#x65F6;&#x95F4;(&#x79D2;),&#x53C2;&#x6570;&#x4E8C;&#x4E3A;HTTP headers&#x4E2D;&#x5C55;&#x793A;&#x7684;&#x503C;\n    #&#x5982;&#x679C;&#x60F3;&#x8981;&#x5173;&#x95ED;,&#x5219;&#x8BBE;&#x7F6E;&#x65F6;&#x95F4;&#x4E3A;0&#x5373;&#x53EF;\n    keepalive_timeout  75 20;\n\n    #lingering_time     30;\n    #lingering_timeout  10;\n    #reset_timedout_connection  on;\n\n\n    server {\n        #&#x8BBE;&#x7F6E;&#x76D1;&#x542C;&#x7AEF;&#x53E3;\n        listen        80;\n        #&#x8BBE;&#x7F6E;&#x8BBF;&#x95EE;&#x57DF;&#x540D;\n        server_name   one.example.com  www.one.example.com;\n\n        #server&#x7684;&#x65E5;&#x5FD7;\n        access_log   /var/log/nginx.access_log  main;\n\n        #&#x5BF9;&#x4E8E;&#x524D;&#x540E;&#x7AEF;&#x5206;&#x79BB;&#x7684;&#x9879;&#x76EE;&#x6765;&#x8BF4;,&#x8BBE;&#x7F6E;&#x524D;&#x7AEF;&#x9759;&#x6001;&#x8DEF;&#x5F84;&#x53CA;&#x9996;&#x9875;\n        #&#x9759;&#x6001;&#x8D44;&#x6E90;&#x8BBE;&#x7F6E;&#x4E5F;&#x53EF;&#x4EE5;&#x5728;location&#x4E2D;&#x8BBE;&#x5B9A;,&#x89C1;&#x4E0B;\n        #index&#x9ED8;&#x8BA4;&#x4E3A;: index index.html;\n        root /usr/demo/dict;\n        index index.html index.htm;\n\n        #&#x5339;&#x914D;: one.example.com/*\n        location / {\n            #&#x8BBF;&#x95EE;&#x8BE5;&#x8DEF;&#x5F84;&#x65F6;,&#x4EE3;&#x7406;&#x5230;&#x8BE5;URL\n            proxy_pass         http://127.0.0.1/;\n            #&#x8BBE;&#x7F6E;&#x4EE3;&#x7406;&#x540E;&#x91CD;&#x5B9A;&#x5411;&#x4E0E;&#x5426;\n            #proxy_redirect     off;\n\n            #&#x5C06;&#x4EE3;&#x7406;&#x670D;&#x52A1;&#x5668;&#x63A5;&#x53D7;&#x5230;&#x7684;&#x4FE1;&#x606F;&#x4F20;&#x5230;&#x771F;&#x5B9E;&#x670D;&#x52A1;&#x5668;&#x4E0A;\n            proxy_set_header   Host             $host;\n            proxy_set_header   X-Real-IP        $remote_addr;\n            proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_set_header X-Forwarded-Proto $scheme;\n\n            #&#x8BBE;&#x5B9A;&#x901A;&#x8FC7;nginx&#x4E0A;&#x4F20;&#x6587;&#x4EF6;&#x7684;&#x5927;&#x5C0F; 10mb\n            client_max_body_size       10m;\n            #&#x8BBE;&#x7F6E;body&#x7F13;&#x51B2;&#x533A;&#x7684;&#x5927;&#x5C0F;,&#x8D85;&#x8FC7;&#x8FD9;&#x4E2A;&#x5927;&#x5C0F;&#x7684;&#x6587;&#x4EF6;&#x53EF;&#x80FD;&#x4F1A;&#x8FD4;&#x56DE;500&#x9519;&#x8BEF;\n            client_body_buffer_size    128k;\n\n            #&#x8BBE;&#x7F6E;&#x6587;&#x4EF6;&#x4E0A;&#x4F20;&#x7684;&#x8BB0;&#x5F55;&#x76EE;&#x5F55;,&#x6700;&#x591A;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E09;&#x5C42;\n            #client_body_temp_path path level1 level2 level3\n            #level&#x53C2;&#x6570;&#x5982;&#x679C;&#x6709;,&#x8868;&#x793A;&#x6709;&#x8FD9;&#x4E00;&#x7EA7;&#x76EE;&#x5F55;,&#x503C;&#x8868;&#x793A;&#x6570;&#x5B57;&#x4F4D;&#x6570;\n            client_body_temp_path      /var/nginx/client_body_temp;\n\n            #&#x540E;&#x53F0;&#x8FDE;&#x63A5;&#x8D85;&#x65F6;&#x65F6;&#x95F4;\n            proxy_connect_timeout      70;\n            #&#x540E;&#x53F0;&#x56DE;&#x4F20;&#x8D85;&#x65F6;&#x65F6;&#x95F4;\n            proxy_send_timeout         90;\n            #&#x540E;&#x53F0;&#x54CD;&#x5E94;&#x8D85;&#x65F6;&#x65F6;&#x95F4;\n            proxy_read_timeout         90;\n            proxy_send_lowat           12000;\n\n            #&#x4EE3;&#x7406;&#x8BFB;&#x53D6;&#x7684;&#x7B2C;&#x4E00;&#x90E8;&#x5206;(headers)&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;\n            proxy_buffer_size          4k;\n            #&#x4EE3;&#x7406;&#x8BFB;&#x53D6;&#x7684;&#x7F13;&#x51B2;&#x533A;&#x4E2A;&#x6570;&#x4E0E;&#x5927;&#x5C0F;\n            proxy_buffers              4 32k;\n            #&#x9AD8;&#x8D1F;&#x8377;&#x4E0B;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;,&#x5E94;&#x4E3A;proxy_buffers * 2\n            proxy_busy_buffers_size    64k;\n            #&#x8BBE;&#x5B9A;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x5927;&#x5C0F;\n            proxy_temp_file_write_size 64k;\n            #&#x8BBE;&#x5B9A;&#x7F13;&#x5B58;&#x6587;&#x4EF6;&#x8DEF;&#x5F84;\n            proxy_temp_path            /var/nginx/proxy_temp;\n            #&#x8BBE;&#x7F6E;&#x5B57;&#x7B26;&#x96C6;\n            charset  koi8-r;\n        }\n\n        # &#x8BBE;&#x7F6E;error page\n        error_page  404  /404.html;\n\n        #&#x5339;&#x914D;: one.example.com/404.html\n        location = /404.html {\n            root  /spool/www;\n        }\n\n        #&#x5339;&#x914D;: one.example.com/old_stuff/*\n        location /old_stuff/ {\n            #url&#x91CD;&#x5199;\n            #permanent&#x8868;&#x793A;&#x6C38;&#x4E45;&#x91CD;&#x5B9A;&#x5411;,&#x5373;301\n            #redirect&#x8868;&#x793A;&#x4E34;&#x65F6;&#x91CD;&#x5B9A;&#x5411;,&#x5373;302\n            rewrite   ^/old_stuff/(.*)$  /new_stuff/$1  permanent;\n        }\n\n        #&#x5339;&#x914D;: /*/*.jpg /*/*.jpeg /*/*.gif &#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;\n        location ~* \\.(jpg|jpeg|gif)$ {\n            root         /spool/www;\n            access_log   off;\n            #&#x6587;&#x4EF6;&#x8FC7;&#x671F;&#x65F6;&#x95F4;&#x63A7;&#x5236;,30 days\n            expires      30d;\n        }\n    }\n}\n</code></pre><h2 class="mume-header" id="location%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99">location&#x5339;&#x914D;&#x89C4;&#x5219;</h2>\n\n<ul>\n<li>&#x5339;&#x914D;&#x539F;&#x5219;&#x4ECE;&#x4E0A;&#x5230;&#x4E0B;:</li>\n<li><code>=</code>(&#x7CBE;&#x786E;&#x5339;&#x914D;)</li>\n<li><code>^~</code>(&#x4EE5;xx&#x5F00;&#x5934;&#x7684;&#x5339;&#x914D;)</li>\n<li><code>~\\.()$</code>(&#x6B63;&#x5219;&#x5339;&#x914D;)</li>\n<li><code>/</code>(&#x901A;&#x7528;&#x5339;&#x914D;)</li>\n<li>&#x6CE8;:&#x76F8;&#x540C;&#x5339;&#x914D;&#x7EA7;&#x522B;&#x4E2D;,&#x6309;&#x5339;&#x914D;&#x957F;&#x5EA6;&#x6392;&#x5E8F;,&#x5982;:\n<ul>\n<li><code>/123/456</code>&#x5339;&#x914D;<code>/</code>&#x4E0E;<code>/123</code>,&#x5219;&#x4F1A;&#x6309;<code>/123</code>&#x5904;&#x7406;&#x8BF7;&#x6C42;</li>\n</ul>\n</li>\n</ul>\n<h3 class="mume-header" id="%E5%8F%AF%E7%94%A8%E7%9A%84%E5%87%A0%E7%A7%8D%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99">&#x53EF;&#x7528;&#x7684;&#x51E0;&#x79CD;&#x5339;&#x914D;&#x89C4;&#x5219;</h3>\n\n<ul>\n<li><code>location /</code>:&#x5168;&#x5339;&#x914D;</li>\n<li><code>location = /404.html</code>:&#x5339;&#x914D;<code>/404.html</code></li>\n<li><code>location ^~/123/</code>:&#x5339;&#x914D;<code>/123/*</code></li>\n<li><code>location ~/atX/</code>:&#x5339;&#x914D;<code>/atX/*</code></li>\n<li><code>location ~*/atX/</code>:&#x5339;&#x914D;<code>/atX/*</code>(&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;)</li>\n<li><code>location !~/atX/</code>:&#x4E0D;&#x5339;&#x914D;<code>!~/atX/*</code></li>\n<li><code>location ~*\\.(png|jpg|gif|bmp|jpeg|webp)$</code>:&#x5339;&#x914D;&#x4EE5;&#x8FD9;&#x51E0;&#x4E2A;&#x4E3A;&#x7ED3;&#x5C3E;&#x7684;url,&#x4E0D;&#x533A;&#x5206;&#x5927;&#x5C0F;&#x5199;</li>\n</ul>\n<h2 class="mume-header" id="%E9%99%841">&#x9644;1</h2>\n\n<ul>\n<li>Vue&#x524D;&#x7AEF;&#x6253;&#x5305;&#x540E;&#x53EF;&#x53C2;&#x8003;&#x7684;linux&#x914D;&#x7F6E;</li>\n</ul>\n<pre data-role="codeBlock" data-info="conf" class="language-conf"><span class="code-mark">conf</span><code>user  root;\nworker_processes  1;\ninclude /usr/share/nginx/modules/mod-stream.conf;\n\nevents {\n    worker_connections  2048;\n    multi_accept on;\n    use epoll;\n}\n\n\nhttp {\n    include mime.types;\n    default_type application/octet-stream;\n    sendfile on;\n    keepalive_timeout 65;\n    access_log /var/log/nginx.access.log;\n    error_log /var/log/nginx.error.log;\n}\n\nserver {\n    listen 80;\n    server_name 192.168.0.1:80;\n    root /usr/html/demo/dict;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n\n    location ^~ /api {\n        proxy_set_header Host $host;\n        proxy_set_header X-Real_IP $remote_addr;\n        proxy_set_header X-Forwarded_For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n        proxy_pass http://192.168.0.2:8080/;\n    }\n}\n</code></pre>\n      </div>\n      <div class="md-sidebar-toc"><ul>\n<li><a href="#nginx%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-nginxconf">nginx&#x914D;&#x7F6E;&#x6587;&#x4EF6; nginx.conf</a>\n<ul>\n<li><a href="#location%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99">location&#x5339;&#x914D;&#x89C4;&#x5219;</a>\n<ul>\n<li><a href="#%E5%8F%AF%E7%94%A8%E7%9A%84%E5%87%A0%E7%A7%8D%E5%8C%B9%E9%85%8D%E8%A7%84%E5%88%99">&#x53EF;&#x7528;&#x7684;&#x51E0;&#x79CD;&#x5339;&#x914D;&#x89C4;&#x5219;</a></li>\n</ul>\n</li>\n<li><a href="#%E9%99%841">&#x9644;1</a></li>\n</ul>\n</li>\n</ul>\n</div>\n      <a id="sidebar-toc-btn">&#x2261;</a>\n',t="title: nginx配置文件 nginx.conf\nauthor: voidblank\ntags: [nginx, 配置文件]\nhtml:\n  embed_local_images: false\n  embed_svg: true\n  offline: false\n  toc: true\nprint_background: false\nexport_on_save:\n  html: true\n"}});
//# sourceMappingURL=11.15dcf69d71424e077968.js.map